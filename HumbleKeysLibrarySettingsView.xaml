<UserControl x:Class="HumbleKeys.HumbleKeysLibrarySettingsView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:sys="clr-namespace:System;assembly=mscorlib"
			 mc:Ignorable="d"
			 d:DesignHeight="400" d:DesignWidth="600">

	<d:DesignerProperties.DesignStyle>
		<Style TargetType="UserControl">
			<Setter Property="Background" Value="White" />
		</Style>
	</d:DesignerProperties.DesignStyle>

    <UserControl.Resources>
        <ResourceDictionary>
            <sys:Boolean x:Key="True">True</sys:Boolean>
            <sys:Boolean x:Key="False">False</sys:Boolean>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/HumbleKeysLibrary;component/Localization/en-US.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <StackPanel Margin="20">
		<CheckBox x:Name="CheckHumbleConnectAccount"
				  IsChecked="{Binding ConnectAccount}"
			  Content="{DynamicResource LOCHumbleKeysSettingsConnectAccount}"/>

        <StackPanel DockPanel.Dock="Top" Margin="40,5,5,0"
					IsEnabled="{Binding IsChecked, ElementName=CheckHumbleConnectAccount}">
			<CheckBox Margin="0,10,0,0"
						IsChecked="{Binding IgnoreRedeemedKeys}"
						Content="Ignore Redeemed Keys"
						ToolTip="When checked, Humble Keys Library does not import keys that have already been redeemed. (NOTE: Checking this and running a library sync will REMOVE prior imported games that have been redeemed)"/>
            <CheckBox Margin="0,10,0,0" x:Name="CheckAddKeyStatus" IsChecked="{Binding AddKeyStatus}" Content="Add Key Redemption status Tag"/>
            <Grid Margin="0 10 0 0" Width="Auto">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <TextBlock
					Name="RedemptionStoreLabel" VerticalAlignment="Center"
                    Text="Add Redemption Store to field:"
					ToolTip="{DynamicResource LOCHumbleKeysRedemptionStoreTip}"
					Grid.Column="0"/>
                <ComboBox Margin="10 0 0 0" Name="RedemptionStoreValues" SelectedValuePath="Tag" SelectedValue="{Binding RedemptionStore, Mode=TwoWay}"
                          Grid.Column="1" ToolTip="{DynamicResource LOCHumbleKeysRedemptionStoreTip}">
                    <ComboBoxItem Tag="0" ToolTip="Don't add to any field">None</ComboBoxItem>
                    <ComboBoxItem Tag="1" ToolTip="Recommended">Source</ComboBoxItem>
                    <ComboBoxItem Tag="2">Tag</ComboBoxItem>
                    <ComboBoxItem Tag="3">Category</ComboBoxItem>
                    <ComboBoxItem Tag="4" ToolTip="Not recommended (may not work properly with some metadata add-ons; for backward compatibility)">Platform</ComboBoxItem>
                </ComboBox>
            </Grid>
            <CheckBox Margin="0,10,0,0" x:Name="CheckAddLinks" IsChecked="{Binding AddLinks}" Content="{DynamicResource LOCHumbleKeysAddLinks}"/>
            <CheckBox Margin="0,10,0,0"
						IsChecked="{Binding ImportChoiceKeys}"
						Content="Import Choice Games"
						Name="ImportChoiceKeys"
						ToolTip="When checked, Humble Keys Library will import Humble Choice games for months that the User is subscribed for." Unchecked="ImportChoiceKeys_OnUnchecked"/>
            <Grid Margin="0 10 0 0" Width="Auto">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"></ColumnDefinition>
					<ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>
				<TextBlock
						Name="TagWithBundleNameLabel" VerticalAlignment="Center"
						Text="Create Tags for Bundle Names:"
						ToolTip="{DynamicResource LOCHumbleKeysTagWithBundleTip}"
						Grid.Column="0"/>
                <ComboBox Margin="10 0 0 0" Name="TagMethodCombo" SelectedValuePath="Tag" SelectedValue="{Binding TagWithBundleName, Mode=TwoWay}"
                          Grid.Column="1" ToolTip="{DynamicResource LOCHumbleKeysTagWithBundleTip}">
                    <ComboBoxItem Tag="0" ToolTip="Do not create Tags based on Bundle Name">None</ComboBoxItem>
                    <ComboBoxItem Tag="1" ToolTip="Create only Tags for Humble Choice Monthly bundles" IsEnabled="{Binding IsChecked,ElementName=ImportChoiceKeys}">
                        <ComboBoxItem.Style>
                            <Style TargetType="{x:Type ComboBoxItem}">
                                <Setter Property="Foreground" Value="White" />
                                <Style.Triggers>
                                </Style.Triggers>
                            </Style>
                        </ComboBoxItem.Style>
                        Monthly Only
                    </ComboBoxItem>
                    <ComboBoxItem Tag="2" ToolTip="Create Tags for all Bundles">All</ComboBoxItem>
                </ComboBox>
            </Grid>
            <Grid Margin="0 10 0 0" Width="Auto">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"></ColumnDefinition>
					<ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>
				<TextBlock
					Name="UnredeemableKeyHandlingLabel" VerticalAlignment="Center"
                    Text="Unredeemable key handling:"
					ToolTip="{DynamicResource LOCHumbleKeysUnredeemableKeyHandlingTip}"
					Grid.Column="0"/>
                <ComboBox Margin="10 0 0 0" Name="UnredeemableKeyValues" SelectedValuePath="Tag" SelectedValue="{Binding UnredeemableKeyHandling, Mode=TwoWay}"
                          Grid.Column="1" ToolTip="{DynamicResource LOCHumbleKeysUnredeemableKeyHandlingTip}">
                    <ComboBoxItem Tag="0" ToolTip="Create only Tags for games that cannot be redeemed">Tag</ComboBoxItem>
                    <ComboBoxItem Tag="1" ToolTip="Delete games that cannot be redeemed">Delete</ComboBoxItem>
                </ComboBox>
			</Grid>
			<CheckBox Margin="0,10,0,0"
						IsChecked="{Binding CacheEnabled}"
						Content="Enable Cache"
						Name="EnableCache"
						ToolTip="When checked, Humble Keys Library will create a persistent Cache in ExtensionsData directory, if a Cache entry exists, it will no longer be retrieved from Humble"/>

            <Label Content="Platform" Margin="0,20,0,5"/>
            <Separator Margin="0,0,0,5" />
            <CheckBox x:Name="CheckPlatformNintendo" IsChecked="{Binding AddPlatformNintendo}" Content="Add Nintendo Switch to all Nintendo keys"/>
            <CheckBox Margin="0,10,0,0" x:Name="CheckPlatformWindows" IsChecked="{Binding AddPlatformWindows}" Content="Add PC (Windows) to all other keys (Recommended)"/>

            <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
				<Button Content="{DynamicResource LOCHumbleKeysAuthenticateLabel}" HorizontalAlignment="Left"
					Command="{Binding LoginCommand}" Margin="0,5,5,5"/>
				<TextBlock VerticalAlignment="Center" Margin="10,5,5,5">
					<TextBlock.Tag>
						<PriorityBinding>
							<Binding Path="IsUserLoggedIn" IsAsync="True" />
							<Binding Source="{x:Null}" />
						</PriorityBinding>
					</TextBlock.Tag>
					<TextBlock.Style>
						<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource BaseTextBlockStyle}">
							<Style.Triggers>
								<Trigger Property="Tag" Value="{StaticResource True}">
									<Setter Property="Text" Value="{DynamicResource LOCHumbleKeysLoggedIn}" />
								</Trigger>
								<Trigger Property="Tag" Value="{StaticResource False}">
									<Setter Property="Text" Value="{DynamicResource LOCHumbleKeysNotLoggedIn}" />
								</Trigger>
								<Trigger Property="Tag" Value="{x:Null}">
									<Setter Property="Text" Value="{DynamicResource LOCHumbleKeysLoginChecking}" />
								</Trigger>
							</Style.Triggers>
						</Style>
					</TextBlock.Style>
				</TextBlock>
			</StackPanel>
		</StackPanel>
	</StackPanel>
</UserControl>